<html>
  <head>
    <meta charset="utf-8">
    <title>Dev Example — Networked-Aframe</title>
    <meta name="description" content="Dev Example — Networked-Aframe">

    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.slim.js"></script>
    <script src="/easyrtc/easyrtc.js"></script>
    <script src="/dist/networked-aframe.js"></script>

    <script src="https://unpkg.com/aframe-randomizer-components@^3.0.1/dist/aframe-randomizer-components.min.js"></script>
    <script src="https://unpkg.com/aframe-particle-system-component@1.0.5/dist/aframe-particle-system-component.min.js"></script>
    <script src="/js/spawn-in-circle.component.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.2.0/dist/aframe-environment-component.min.js"></script>
  </head>
  <body>
    <a-scene networked-scene="
      room: dev;
      debug: true;
      adapter: wseasyrtc;
    ">




    <a-assets>
        <a-asset-item id="reticle"
          src="https://cdn.aframe.io/examples/ar/models/reticle/reticle.gltf"
          response-type="arraybuffer" crossorigin="anonymous"></a-asset-item> 
    

        <a-asset-item id="alcoholbottle" src="/Models/gltf/TeacherAvatar.gltf"></a-asset-item>
        <a-asset-item id="alcoholgel" src="/Models/gltf/StudentNurseAvatar.gltf"></a-asset-item>
        <a-asset-item id="bandeja" src="/Models/gltf/Bandeja.gltf"></a-asset-item>
        <a-asset-item id="bandeja02" src="/Models/gltf/Tray.gltf"></a-asset-item>
        <a-asset-item id="base" src="/Models/gltf/Base.gltf"></a-asset-item>
        <a-asset-item id="bed" src="/Models/gltf/Bed.gltf"></a-asset-item>
        <a-asset-item id="container" src="/Models/gltf/TrashContainer.gltf"></a-asset-item>
        <a-asset-item id="containerblack" src="/Models/gltf/TrashContainerBlack.gltf"></a-asset-item>
        <a-asset-item id="cottonswabs01" src="/Models/gltf/CottonSwabs01.gltf"></a-asset-item>
        <a-asset-item id="cottonswabs02" src="/Models/gltf/CottonSwabs02.gltf"></a-asset-item>
        <a-asset-item id="cottonswabs03" src="/Models/gltf/CottonSwabs03.gltf"></a-asset-item>
        <a-asset-item id="frontwall" src="/Models/gltf/FrontWall_Auditorium.gltf"></a-asset-item>
        <a-asset-item id="floor" src="/Models/gltf/Floor.gltf"></a-asset-item>
        <a-asset-item id="forceps" src="/Models/gltf/Forceps.gltf"></a-asset-item>
        <a-asset-item id="gauze" src="/Models/gltf/Gauze.gltf"></a-asset-item>
        <a-asset-item id="maskn95" src="/Models/gltf/MaskN95.gltf"></a-asset-item>
        <a-asset-item id="medicaltape" src="/Models/gltf/MedicalTape.gltf"></a-asset-item>
        <a-asset-item id="mesa" src="/Models/gltf/Table01.gltf"></a-asset-item>
        <a-asset-item id="patient" src="/Models/gltf/Patient.gltf"></a-asset-item>
        <a-asset-item id="salver" src="/Models/gltf/Salver.gltf"></a-asset-item>
        <a-asset-item id="silla" src="/Models/gltf/Silla.gltf"></a-asset-item>
        <a-asset-item id="dripbag" src="/Models/gltf/DripBag.gltf"></a-asset-item>
        <a-asset-item id="surgicalpallets" src="/Models/gltf/SurgicalPallets.gltf"></a-asset-item>
        <a-asset-item id="table02" src="/Models/gltf/Table02.gltf"></a-asset-item>
        <a-asset-item id="table03" src="/Models/gltf/Table03.gltf"></a-asset-item>
        <a-asset-item id="trashcan" src="/Models/gltf/TrashCan.gltf"></a-asset-item>
        <a-asset-item id="tweezers" src="/Models/gltf/Tweezers.gltf"></a-asset-item>
        <a-asset-item id="tweezers2" src="/Models/gltf/Tweezers2.gltf"></a-asset-item>
        <a-asset-item id="scenebase" src="/Models/gltf/Scene_Base.gltf"></a-asset-item>
        <a-asset-item id="walls" src="/Models/gltf/Scene_Walls.gltf"></a-asset-item>
        <a-asset-item id="scenemedixlablogo" src="/Models/gltf/Scene_Medixlablogo.gltf"></a-asset-item>
        <a-asset-item id="sceneieproeslogo" src="/Models/gltf/Scene_Ieproesblogo.gltf"></a-asset-item>
        <a-asset-item id="scenevertexlogo" src="/Models/gltf/Scene_VertexLogo.gltf"></a-asset-item>
        <a-asset-item id="scenevertexlogorot" src="/Models/gltf/Scene_VertexLogo_Rot.gltf"></a-asset-item>
        <a-asset-item id="scenebase02" position="0 0 0" src="/Models/gltf/Base_Auditorium.gltf"></a-asset-item>
        <a-asset-item id="stairsprincipal" src="/Models/gltf/Stairs_Auditorium.gltf"></a-asset-item>
        <a-asset-item id="ministairs" src="/Models/gltf/Mini_Stairs_Auditorium.gltf"></a-asset-item>
        <a-asset-item id="roofauditorium" src="/Models/gltf/Roof_Auditorium.gltf"></a-asset-item>
        <a-asset-item id="columns" src="/Models/gltf/Columns_Auditorium.gltf"></a-asset-item>
        <a-video id="canalizacion" src="/videos/Test.mp4" autoplay loop="true"></a-video>
        
    </a-assets>

    <a-entity id="generalenvironment" environment="lightPosition: 1 5 -2;" visible="true">
    </a-entity>


    
      <a-entity camera="fov: 60" position="1.70517 3.77742 7.90324" wasd-controls="" rotation="" look-controls="" aframe-injected="" fov="60" data-aframe-inspector-original-camera=""></a-entity>
     
      <a-entity id="roofauditorium01" gltf-model="#roofauditorium"; scale="1 1 1" position="0 1.35517 0" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="alcoholbottle01" gltf-model="#alcoholbottle"; scale="1 1 1" position="-0.3679 2.54021 1.1641" material="color: brown" rotation="0 178.3921283873672 0"></a-entity>
      <a-entity id="alcoholgel01" gltf-model="#alcoholgel"; scale="1 1 1" position="0.40934 2.5107 1.1618" material="color: brown" rotation="0 177.43013224934256 0"></a-entity>
      <a-entity id="bandeja01" gltf-model="#bandeja"; scale="1 1 1" position="0.09071 -0.58757 0.33463" material="color: brown" rotation="0 90 0"></a-entity>
      <a-entity id="bandeja002" gltf-model="#bandeja02"; scale="1 1 1" position="0.01345 -0.26792 0.12408" material="color: brown" rotation="0 90 0"></a-entity>
      <a-entity id="bandeja003" gltf-model="#bandeja02"; scale="1 1 1" position="0.02168 0.71011 0.6949" material="color: brown" rotation="0 90 0"></a-entity>
      <a-entity id="base01" gltf-model="#base"; scale="1 1 1" position="0.57653 -2.0015 0.34579" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="bed01" gltf-model="#bed"; scale="1 1 1" position="1.44191 -0.75702 0.1675" material="color: brown; depthWrite: false; depthTest: false; alphaTest: 0; flatShading: false; side: front; metalness: 1" rotation="0 -2.97 0"></a-entity>
      <a-entity id="container01" gltf-model="#container"; scale="1 1 1" position="2.23932 -0.70722 -1.14812" material="color: brown" rotation="0 90 0"></a-entity>
      <a-entity id="containerblack01" gltf-model="#containerblack"; scale="1 1 1" position="2.83738 -0.75855 -1.05909" material="color: brown" rotation="0 90 0"></a-entity>
      <a-entity id="cottonswabs001" gltf-model="#cottonswabs01"; scale="1 1 1" position="0.09072 0.44027 0.65752" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="cottonswabs002" gltf-model="#cottonswabs02"; scale="1 1 1" position="0.05149 0.52159 0.61503" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="cottonswabs003" gltf-model="#cottonswabs03"; scale="1 1 1" position="0.03913 0.01437 0.58822" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="frontwall01" gltf-model="#frontwall"; scale="1 1 1" position="0 0 -1.12569" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="floor01" gltf-model="#floor01"; scale="1 1 1" position="0 0 0" material="color: #ffffff; emissive: #000000; emissiveIntensity: 1" rotation="0 0 0"></a-entity>
      <a-entity id="floor02" gltf-model="#floor02"; scale="1 1 1" position="-0 0 0" material="color: #ffffff; emissive: #000000; emissiveIntensity: 1" rotation="0 0 0"></a-entity>
      <a-entity id="forceps01" gltf-model="#forceps"; scale="1 1 1" position="-0.03028 0.5163 0.67146" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="gauze01" gltf-model="#gauze"; scale="1 1 1" position="-0.02897 -0.35243 0.51037" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="maskn9501" gltf-model="#maskn95"; scale="1 1 1" position="-0.31717 -0.23868 0.13307" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="medicaltape01" gltf-model="#medicaltape"; scale="1 1 1" position="-0.05427 0.23219 0.71188" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="mesa01" gltf-model="#mesa"; scale="1 1 1" position="-2.0204 -1.14331 -2.42091" material="color: brown" rotation="0 180 0"></a-entity>
      <a-entity id="patient01" gltf-model="#patient"; scale="1 1 1" position="1.46963 -0.84181 0.20464" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="roof01" gltf-model="#roof"; scale="1 1 1" position="0 0 0" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="salver01" gltf-model="#salver"; scale="1 1 1" position="-1.98987 -0.32244 0.22229" material="color: brown" rotation="0 90 0"></a-entity>
      <a-entity id="dripbag01" gltf-model="#dripbag"; scale="1 1 1" position="-0.33061 0.39724 0.71467" material="color: brown" rotation="0 90 0"></a-entity>
      <a-entity id="scenebase01" gltf-model="#scenebase"; scale="1 1 1" position="0 0 0" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="scenebase02" gltf-model="#scenebase02"; scale="1 1 1" position="0 0 0" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="scenemedixlablogo01" gltf-model="#scenemedixlablogo"; scale="2 2 2" position="0.04036 11.22773 -2.14313" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="sceneieproeslogo01" gltf-model="#sceneieproeslogo"; scale="3 3 3" position="-7.3502 9.07108 11.32697" material="color: brown" rotation="0 151.70203541678805 0"></a-entity>    
      <a-entity id="scenevertexlogo01" gltf-model="#scenevertexlogo"; scale="1 1 1" position="7.21432 9.20078 11.49686" material="color: brown" rotation="0 -146.36321468175908 0"></a-entity>
      <a-entity id="table002" gltf-model="#table02"; scale="1 1 1" position="0.59361 -0.97708 -2.44006" material="color: brown" rotation="0 180 0"></a-entity>
      <a-entity id="table003" gltf-model="#table03"; scale="1 1 1" position="-2.0092 -0.43639 0.2209" material="color: brown" rotation="0 180 0"></a-entity>
      <a-entity id="cabinet005" gltf-model="#table03"; scale="1 1 1" position="-2.02939 -0.21989 -0.50913" material="color: brown" rotation="0 180 0"></a-entity>
      <a-entity id="trashcan01" gltf-model="#trashcan"; scale="1 1 1" position="-2.13642 -0.47579 1.15873" material="color: brown" rotatation="0 0 45"></a-entity>
      <a-entity id="tweezers01" gltf-model="#tweezers"; scale="1 1 1" position="-0.03312 0.31436 0.43078" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="tweezers02" gltf-model="#tweezers2"; scale="1 1 1" position="-0.12673 0.09137 0.52875" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="stairsprincipal01"  gltf-model="#stairsprincipal"; scale="1 1 1" position="0 0 0" rotation="0 0 0"></a-entity>
      <a-entity id="ministairs01"  gltf-model="#ministairs"; scale="1 1 1" position="0 0 0" rotation="0 0 0"></a-entity>
      <a-entity id="lamps03"  gltf-model="#lamps01"; scale="1 1 1" position="0 16.9716 0" rotation="0 0 0"></a-entity>
      <a-entity id="columns01" gltf-model="#columns"; scale="1 1 1" position="0 0 0" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="video01" material="shader: flat; side: double; src: #canalizacion" geometry="primitive: plane; radius: 12; height: 9; open-ended: true; theta-start: 142.5; theta-length: 75;" position="0 7.15405 -2.14585" rotation="0 0 0" scale="9.99487 0.64905 1.16307" ></a-entity>
      <a-entity animation="property: rotation; to: 0 360 0; loop: true; dur: 50000" material="shader: flat; side: double; src: #canalizacion" geometry="primitive: cylinder; radius: 12; height: 9; open-ended: true; theta-start: 142.5; theta-length: 75;" position="0 11 1" rotation="0 0 0" scale="-1 1 1" ></a-entity>
      <a-entity animation="property: rotation; to: 0 360 0; loop: true; dur: 50000" material="shader: flat; side: double; gltf-model: #scenevertexlogorot" gltf-model="#scenevertexlogorot" position="0 11 1" rotation="0 0 0" scale="-1 1 1" ></a-entity>


      <a-entity light="intensity: 0.5; type: ambient" position="-2.02939 0.34443 -0.50913" rotation="0 180 0"></a-entity>
      <a-entity light="color: #ffffff; penumbra: 0.51; type: point; intensity: 0.26" id="light01"
                position="-1.11051 9.99225 4.03024" rotation="-90 0 0"></a-entity>
   
                
                
      



    </a-scene>
    
    <script>
      // Define custom schema for syncing avatar color, set by random-color
      NAF.schemas.add({
        template: '#avatar-template',
        components: [
          'position',
          'rotation',
          {
            selector: '.head',
            component: 'material',
            property: 'color'
          }
        ]
      });

      // Called by Networked-Aframe when connected to server
      function onConnect () {
        console.log("onConnect", new Date());
      }

      // On mobile remove elements that are resource heavy
      var isMobile = AFRAME.utils.device.isMobile();

      if (isMobile) {
        var particles = document.getElementById('particles');
        particles.parentNode.removeChild(particles);
      }
    </script>
  </body>
</html>
