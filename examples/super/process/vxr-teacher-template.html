<html>

<head>
  <title>Vertex Medixlab</title>
  <!-- Replace "../build.js" with the super-hands and
         A-Frame distributions to run : -->
  <script src="../build.js"></script>
  <!-- <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script> -->
  <!-- <script src="https://unpkg.com/super-hands/dist/super-hands.min.js"></script> -->

  <!-- Networked aframe -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.slim.js"></script>
  <script src="/easyrtc/easyrtc.js"></script>
  <script src="/dist/networked-aframe.js"></script>
  <script src="https://unpkg.com/aframe-randomizer-components@^3.0.1/dist/aframe-randomizer-components.min.js"></script>
  <script
    src="https://unpkg.com/aframe-particle-system-component@1.0.5/dist/aframe-particle-system-component.min.js"></script>
  <script src="/js/spawn-in-circle.component.js"></script>
  ​​<script src="https://unpkg.com/aframe-text-geometry-component@^0.5.0/dist/aframe-text-geometry-component.min.js"></script> 


  <!-- Super hands -->
  <script src="https://cdn.jsdelivr.net/gh/n5ro/aframe-physics-system@v4.0.1/dist/aframe-physics-system.js"></script>
  <script src="https://unpkg.com/aframe-event-set-component@^4.1.1/dist/aframe-event-set-component.min.js"></script>
  <script src="https://unpkg.com/aframe-physics-extras/dist/aframe-physics-extras.min.js"></script>
  <script src="https://rawgit.com/feiss/aframe-environment-component/master/dist/aframe-environment-component.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>

  <script src="../../js/set-name.component.js"></script>
  
  <!-- ownership transfer dependencies -->

  <script src="../../js/spawner.component.js"></script>
  <script src="../../js/toggle-physics.component.js"></script>
  <script src="../../js/rotator.component.js"></script>
  <script src="../../js/input.component.js"></script>
  <script src="../../js/avatar-body.component.js"></script>

  <script>
    AFRAME.registerComponent('assign-seat', {
      schema: {
        position: {
          x: 0, 
          y: 0, 
          z: 0
        }
      },

      init: function () {
        var data = this.data;
        var el = this.el;

        // Sets spectator avatar position 
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const spawn = urlParams.get('spawn')
        const theaterSlots = [
        {
            identifier: '1',
            position: { x: -6, y: -2.3, z: 0.5 },
          },
          {
            identifier: '2',
            position: { x: -5.5, y: -2.3, z: 2.1 }
          },
          {
            identifier: '3',
            position: { x: -4.5, y: -2.3, z: 3.5 }
          },
          {
            identifier: '4',
            position: { x: -1.7, y: -2.3, z: 5.5 }
          },
          {
            identifier: '5',
            position: { x: 0, y: -2.3, z: 5.8 }
          },
          {
            identifier: '6',
            position: { x: 1.7, y: -2.3, z: 5.5 }
          },
          {
            identifier: '7',
            position: { x: 4.5, y: -2.3, z: 3.5 }
          },
          {
            identifier: '8',
            position: { x: 5.5, y: -2.3, z: 2.1 }
          },
          {
            identifier: '9',
            position: { x: 6, y: -2.3, z: 0.5 }
          },
          {
            identifier: '10',
            position: { x: -7, y: -1.3, z: 0.5}
          },
          {
            identifier: '11',
            position: { x: -6.5, y: -1.3, z: 2.6 }
          },
          {
            identifier: '12',
            position: { x: -5.5, y: -1.3, z: 4.3}
          },
          {
            identifier: '13',
            position: { x: -2, y: -1.3, z: 6.9 }
          },
          {
            identifier: '14',
            position: { x: 0.1, y: -1.3, z: 7.1}
          },
          {
            identifier: '15',
            position: { x: 2.2, y: -1.3, z: 6.9 }
          },
          {
            identifier: '16',
            position: { x: 5.7, y: -1.3, z: 4.2}
          },
          {
            identifier: '17',
            position: { x: 6.6, y: -1.3, z: 2.4 }
          },
          {
            identifier: '18',
            position: { x: 7.1, y: -1.3, z: 0.6}
          },
          {
            identifier: '19',
            position: { x: -8.5, y: -0.2, z: 0.6 }
          },
          {
            identifier: '20',
            position: { x: -8.2, y: -0.2, z: 2.3}
          },
          {
            identifier: '21',
            position: { x: -7.5, y: -0.2, z: 4 }
          },
          {
            identifier: '22',
            position: { x: -6.5, y: -0.2, z: 5.4}
          },
          {
            identifier: '23',
            position: { x: -2.5, y: -0.2, z: 8 }
          },
          {
            identifier: '24',
            position: { x: -0.8, y: -0.2, z: 8.4}
          },
          {
            identifier: '25',
            position: { x: 1, y: -0.2, z: 8.4 }
          },
          {
            identifier: '26',
            position: { x: 2.7, y: -0.2, z: 8}
          },
          {
            identifier: '27',
            position: { x: 6.4, y: -0.2, z: 5.3 }
          },
          {
            identifier: '28',
            position: { x: 7.4, y: -0.2, z: 4}
          },
          {
            identifier: '29',
            position: { x: 8, y: -0.2, z: 2.3 }
          },
          {
            identifier: '30',
            position: { x: 8.5, y: -0.2, z: 0.7}
          },
          {
            identifier: '31',
            position: { x: -9.6, y: 0.5, z: 1.8 }
          },
          {
            identifier: '32',
            position: { x: -8.9, y: 0.5, z: 3.6}
          },
          {
            identifier: '33',
            position: { x: -7.5, y: 0.5, z: 5.5 }
          },
          {
            identifier: '34',
            position: { x: -2, y: 0.5, z: 9.2}
          },
          {
            identifier: '35',
            position: { x: 0, y: 0.5, z: 9.6 }
          },
          {
            identifier: '36',
            position: { x: 2.4, y: 0.5, z: 9.4}
          },
          {
            identifier: '37',
            position: { x: 8, y: 0.5, z: 5.5 }
          },
          {
            identifier: '38',
            position: { x: 8.9, y: 0.5, z: 3.7}
          },
          {
            identifier: '39',
            position: { x: 9.6, y: 0.5, z: 1.4 }
          },
          {
            identifier: '40',
            position: { x: -11, y: 1.3, z: 0.7}
          },
          {
            identifier: '41',
            position: { x: -10.7, y: 1.3, z: 2.6 }
          },
          {
            identifier: '42',
            position: { x: -10.4, y: 1.3, z: 4}
          },
          {
            identifier: '43',
            position: { x: -9.3, y: 1.3, z: 5.8 }
          },
          {
            identifier: '44',
            position: { x: -8.1, y: 1.3, z: 7.2}
          },
          {
            identifier: '45',
            position: { x: -3.6, y: 1.3, z: 10.5 }
          },
          {
            identifier: '46',
            position: { x: -1.9, y: 1.3, z: 10.9}
          },
          {
            identifier: '47',
            position: { x: 0, y: 1.3, z: 11 }
          },
          {
            identifier: '48',
            position: { x: 1.9, y: 1.3, z: 10.9}
          },
          {
            identifier: '49',
            position: { x: 3.8, y: 1.3, z: 10.5 }
          },
          {
            identifier: '50',
            position: { x: 8.5, y: 1.3, z: 7.3}
          }
        ]

        let slotFound = theaterSlots.find(x => x.identifier === spawn);
        let slotPosition = slotFound.position
        el.setAttribute('position', slotPosition)
      }
    })

    
  </script>

  <script>
    function spawnentity() {
      let syncs = document.getElementsByClassName("syncup");
      let vxr_obj_template = document.getElementsByClassName("vxr-obj-template");
      let constraint_avatar_template = document.getElementsByClassName("constraint-avatar-template");
      for (let i = 0; i < syncs.length; ++i) {
        syncs[i].setAttribute("networked", "template:#vxr-template;attachTemplateToLocal:true")
      }
      for (let i = 0; i < vxr_obj_template.length; ++i) {
        vxr_obj_template[i].setAttribute("networked", "template:#vxr-obj-template;attachTemplateToLocal:true")
      }
      for (let i = 0; i < constraint_avatar_template.length; ++i) {
        constraint_avatar_template[i].setAttribute("networked", "template:#constraint-avatar-template;attachTemplateToLocal:true")
      }
    }
  </script>

<!-- <script  src="https://rawgit.com/fernandojsg/aframe-input-mapping-component/master/dist/aframe-input-mapping-component.min.js"></script> -->
<script src="https://unpkg.com/aframe-log-component/dist/aframe-log-component.min.js"></script> 


  <link rel="stylesheet" type="text/css" href="../assets/examples.css">
</head>

<body>
  <a-scene physics networked-scene="
      room: audio;
      adapter: easyrtc;
      audio: true;
      debug: true;
      onConnect: spawnentity;
    ">
    <a-assets>
      <!-- <a-asset-item id="htc" src="../assets/vr_controller_vive.obj"></a-asset-item> -->
      <a-asset-item id="maskn95" src="../../Models/gltf/MaskN95.gltf"></a-asset-item>
      <a-asset-item id="table" src="../../Models/gltf/Bandeja.gltf"></a-asset-item>
      <a-asset-item id="alcoholbottle" src="assets/AlcoholBottle.gltf"></a-asset-item>
      <a-asset-item id="bed" src="../../Models/gltf/Bed.gltf"></a-asset-item>
      <a-asset-item id="patient" src="../../Models/gltf/Patient.gltf"></a-asset-item>
      <a-asset-item id="tray" src="assets/Tray.gltf"></a-asset-item>
      <a-asset-item id="StudentAvatar" src="assets/StudentNurseAvatar.gltf"></a-asset-item>
      <a-asset-item id="SpectatorAvatar" src="assets/avatars/SpectatorAvatar.gltf"></a-asset-item>
      <a-asset-item id="TeacherAvatar" src="assets/TeacherAvatar.gltf"></a-asset-item>
      <a-asset-item id="right-hand" src="assets/rightHandHigh.glb"></a-asset-item>
      <a-asset-item id="left-hand" src="assets/leftHandHigh.glb"></a-asset-item>

      <!-- Avatars -->
      <a-asset-item id="StudentAvatarHead" src="assets/avatars/StudentAvatarHead.gltf"></a-asset-item>
      <a-asset-item id="StudentAvatarBody" src="assets/avatars/StudentAvatarBody.gltf"></a-asset-item>
      <a-asset-item id="TeacherAvatarHead" src="assets/avatars/TeacherAvatarHead.gltf"></a-asset-item>
      <a-asset-item id="TeacherAvatarBody" src="assets/avatars/TeacherAvatarBody.gltf"></a-asset-item>
      <a-asset-item id="student" src="assets/StudentNurseAvatar.gltf"></a-asset-item>
      <a-asset-item id="teacher" src="assets/TeacherAvatar.gltf"></a-asset-item>

      <!-- Theater -->
      <a-asset-item id="scenebase" src="/Models/gltf/Scene_Base.gltf"></a-asset-item>
      <a-asset-item id="scenemedixlablogo" src="/Models/gltf/Scene_Medixlablogo.gltf"></a-asset-item>
      <a-asset-item id="sceneieproeslogo" src="/Models/gltf/Scene_Ieproesblogo.gltf"></a-asset-item>
      <a-asset-item id="scenevertexlogo" src="/Models/gltf/Scene_VertexLogo.gltf"></a-asset-item>
      <a-asset-item id="scenebase02" src="/Models/gltf/Base_Auditorium.gltf"></a-asset-item>
      <a-asset-item id="stairsprincipal" src="/Models/gltf/Stairs_Auditorium.gltf"></a-asset-item>
      <a-asset-item id="ministairs" src="/Models/gltf/Mini_Stairs_Auditorium.gltf"></a-asset-item>
      <a-asset-item id="roofauditorium" src="/Models/gltf/Roof_Auditorium.gltf"></a-asset-item>
      <a-asset-item id="columns" src="/Models/gltf/Columns_Auditorium.gltf"></a-asset-item>
      <a-asset-item id="frontwall" src="/Models/gltf/FrontWall_Auditorium.gltf"></a-asset-item>
      <a-video id="canalizacion" src="/videos/Test.mp4" autoplay loop="true"></a-video>

      <a-mixin id="touch" physics-collider phase-shift collision-filter="collisionForces: false"
        static-body="shape: sphere; sphereRadius: 0.02" super-hands="colliderEvent: collisions;
                          colliderEventProperty: els;
                          colliderEndEvent: collisions;
                          colliderEndEventProperty: clearedEls;">
      </a-mixin>
      <a-mixin id="point" raycaster="showLine: true; objects: .vxr-interact"
      collision-filter="collisionForces: false"
      static-body="shape: sphere; sphereRadius: 0.001"
      super-hands="colliderEvent: raycaster-intersection;
                    colliderEventProperty: els;
                    colliderEndEvent:raycaster-intersection-cleared;
                    colliderEndEventProperty: clearedEls;"></a-mixin>

      <!-- Player -->
      <template id="player-template">
        <a-entity></a-entity>
      </template>
      ​
      <!-- Nurse Avatar -->
      <template id="student-avatar-template">
        <a-entity class="NurseHeadAvatar" gltf-model="#StudentAvatar" position="0 2 0"  networked-audio-source="positional:false"></a-entity>
      </template>

      <!-- Teacher Avatar -->
      <template id="teacher-avatar-template">
        <a-entity class="SpectatorAvatar" gltf-model="#TeacherAvatar"  networked-audio-source="positional:false"></a-entity>
      </template>

      <!-- Spectator Avatar -->
      <template id="spectator-avatar-template">
        <a-entity class="SpectatorAvatar" gltf-model="#SpectatorAvatar"  networked-audio-source="positional:false"></a-entity>
      </template>

      <!-- Teacher Avatar Constraints -->
      <template id="constraint-teacher-avatar-template">
        <a-entity>
          <a-entity class="name-up-teacher"></a-entity>
          <a-entity class="TeacherAvatar" id="teacher" gltf-model="#teacher"></a-entity> 
          <!-- <a-entity class="TeacherAvatarBody" id="teacherbody" gltf-model="#TeacherAvatarBody" dynamic-body="angularDamping: 1"></a-entity>
          <a-entity class="TeacherAvatarHead" id="teacherhead"  gltf-model="#TeacherAvatarHead" static-body avatar-body="body:#teacherbody; id:#teacherbody"></a-entity> -->
        </a-entity>
      </template>

      <!-- Student Avatar Constraints -->
      <template id="constraint-student-avatar-template">
        <a-entity>
          <a-entity class="name-up-student"></a-entity>
          <a-entity class="StudentAvatar" id="student" gltf-model="#student"></a-entity> 
          <!-- <a-entity class="StudentAvatarBody" id="studentbody" gltf-model="#StudentAvatarBody" dynamic-body="angularDamping: 1"></a-entity>
          <a-entity class="StudentAvatarHead" id="studenthead"  gltf-model="#StudentAvatarHead" static-body avatar-body="body:#studentbody; id:#studentbody"></a-entity> -->
        </a-entity>
      </template>

      <!-- Spectator Avatar Constraints -->
      <template id="constraint-spectator-avatar-template">
        <a-entity>
          <a-entity class="name-up"></a-entity>
          <a-entity class="SpectatorAvatar" id="spectator" gltf-model="#SpectatorAvatar"></a-entity>
          <!-- <a-entity class="SpectatorAvatarBody" id="spectatorbody" gltf-model="#SpectatorAvatarBody" dynamic-body="angularDamping: 1"></a-entity>
          <a-entity class="SpectatorAvatarHead" id="spectatorhead"  gltf-model="#SpectatorAvatarHead" static-body avatar-body="body:#spectatorbody; id:#spectatorbody"></a-entity>        </a-entity> -->
      </template>

      <!-- Right Hand -->
      <template id="right-hand-template">
        <a-entity>
          <!-- <a-entity obj-model="obj: #htc"></a-entity> -->
          <a-entity gltf-model="#right-hand"></a-entity>
        </a-entity>
      </template>

      <!-- Left Hand -->
      <template id="left-hand-template">
        <a-entity>
          <!-- <a-entity obj-model="obj: #htc"></a-entity> -->
          <a-entity gltf-model="#left-hand"></a-entity>
        </a-entity>
      </template>

      <!-- vxr-template -->
      <template id="vxr-template">
        <a-entity >
          <a-box class="vxr-obj-a" rotator="speed:-2" width="0.35" height="0.35" depth="0.35" rotation="0 0 0" color="green"
            position="0 0 0"></a-box>
          <a-sphere class="vxr-obj-b" toggle-physics color="#f00" dynamic-body draggable grabbable  radius="0.18" position="0.5 0 0"></a-sphere>
          <a-box class="vxr-obj-c" rotator="speed:2" color="blue" width="0.35" height="0.35" depth="0.35"
            position="1 0 0"></a-box>
        </a-entity>
      </template>

      <!-- vxr-gltf -->
      <template id="vxr-obj-template">
        <a-entity>
          <a-entity class="vxr-obj-maskn95 vxr-interact"  gltf-model="#maskn95" dynamic-body draggable grabbable toggle-physics position="-0.4 2 -0.2"></a-entity>
          <a-entity class="vxr-obj-alcoholbottle vxr-interact" gltf-model="#alcoholbottle" dynamic-body draggable grabbable toggle-physics position="-0.4 2 0"></a-entity>
          <a-entity class="vxr-obj-tray vxr-interact" gltf-model="#tray" dynamic-body draggable grabbable toggle-physics position="0 2 -0.2"></a-entity>
        </a-entity>
      </template>

      <template id="audience">
        <a-entity id="spectator"
        position="-2.9119 2.18025 -2.79791"
        assign-seat>

        <a-entity id="constraint-spectator" camera position="0 3 0.2" look-controls zoom="100" fov="120">
          <a-entity class="name-up" name-up></a-entity>
        </a-entity>
      </a-entity>

      </template>

    </a-assets>

    
    <a-entity environment="lightPosition: 1 5 -2; groundColor: #00275b; grid: dots; gridColor: #168dab; preset: starry; skyType: atmosphere; skyColor: #030022; playArea: 0.5; ground: flat; groundColor2: #009dff" visible=""><a-entity class="environment" position="0 50 0"></a-entity><a-entity class="environment" position="1 5 -2" light="intensity: 0.1" visible=""></a-entity><a-entity rotation="-90 0 0" class="environmentGround environment" visible="" scale="1 1 3" false; receive: false"></a-entity><a-entity class="environmentDressing environment" visible="false"></a-entity><a-sky radius="200" theta-length="110" class="environment" material="shader: skyshader; sunPosition: 0 0 0" visible="" geometry=""></a-sky><a-entity id="stars"></a-entity><a-entity class="environment" position="0 50 0" ></a-entity><a-entity class="environment" position="1 5 -2" light="intensity: 0.1" visible=""></a-entity><a-entity rotation="-90 0 0" class="environmentGround environment" visible="" scale="1 1 3"></a-entity><a-entity class="environmentDressing environment" visible="false"></a-entity><a-sky radius="200" theta-length="110" class="environment" material="shader: skyshader; sunPosition: 0 0 0" visible="" geometry=""></a-sky><a-entity id="stars" visible=""></a-entity></a-entity>
    <!-- <a-entity light="type: point; intensity: 0.75; distance: 50; decay: 2"
            position="0 10 10">
      </a-entity> -->
      <a-light type="directional" position="0 0 0" rotation="-90 0 0" target="#directionaltarget">
        <a-entity id="directionaltarget" position="0 0 -1"></a-entity>
      </a-light>

      <!-- Static Objects -->
      <a-entity class="gltf" gltf-model="#table" position="-1.5 1 0" rotation="0 0 0" static-body></a-entity>
      <a-entity class="gltf" gltf-model="#table"  position="-0.13 1 0" rotation="0 0 0" static-body></a-entity>
      <a-entity class="gltf" gltf-model="#bed" position="1.2 1 0" rotation="0 0 0" static-body></a-entity>
      <a-entity id="patient01" gltf-model="../../Models/gltf/Patient.gltf" ;="" scale="" position="1.18674 1.03109 -0.06237" material="color: brown" rotation=""></a-entity>


      <!-- Theater Objects -->
      <a-entity id="frontwall01" gltf-model="#frontwall"; scale="1 1 1" position="0 0 -1.12569" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="roofauditorium01" gltf-model="#roofauditorium"; scale="1 1 1" position="0 1.35517 0" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="scenebase01" gltf-model="#scenebase"; scale="1 1 1" position="0 -0.82 0" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="scenebase02" gltf-model="#scenebase02"; scale="1 1 1" position="0 0 0" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="scenemedixlablogo01" gltf-model="#scenemedixlablogo"; scale="2 2 2" position="0.04036 11.22773 -2.14313" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="sceneieproeslogo01" gltf-model="#sceneieproeslogo"; scale="3 3 3" position="-7.3502 9.07108 11.32697" material="color: brown" rotation="0 151.70203541678805 0"></a-entity>    
      <a-entity id="scenevertexlogo01" gltf-model="#scenevertexlogo"; scale="1 1 1" position="7.21432 9.20078 11.49686" material="color: brown" rotation="0 -146.36321468175908 0"></a-entity>
      <a-entity id="stairsprincipal01"  gltf-model="#stairsprincipal"; scale="1 1 1" position="0 0 0" rotation="0 0 0"></a-entity>
      <a-entity id="ministairs01"  gltf-model="#ministairs"; scale="1 1 1" position="0 0 0" rotation="0 0 0"></a-entity>
      <a-entity id="lamps03"  gltf-model="#lamps01"; scale="1 1 1" position="0 16.9716 0" rotation="0 0 0"></a-entity>
      <a-entity id="columns01" gltf-model="#columns"; scale="1 1 1" position="0 0 0" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="video01" material="shader: flat; side: double; src: #canalizacion" geometry="primitive: plane; " position="0 7.32941 -1.90179" rotation="0 0 0" scale="7 4.743 4" ></a-entity>
     
    
     <!-- Theater Lights -->
     <a-entity background="color: #92f2ff"></a-entity>

      <a-entity light="intensity: 0.1; type: ambient" position="-2.02939 0.34443 -0.50913" rotation="0 180 0"></a-entity>
      <a-entity light="color: #ffffff; penumbra: 0.81; type: point; intensity: 0.34" id="light01"
                position="-1.11051 9.99225 4.03024" rotation="-90 0 0"></a-entity>

      <!-- Physics Objects -->
      <a-entity class="vxr-obj-template" position="0 1.5 -0.2"></a-entity>
      <!-- <a-entity class="constraint-avatar-template" position="0 3 2"></a-entity> -->

<a-entity id="player"   networked="template:#player-template;attachTemplateToLocal:false;" position="0 0.8 -2"
        rotation="0 180 0" movement-controls>
        <a-entity camera position="0 3 0.2" look-controls zoom="100" fov="120"
          networked="template:#constraint-teacher-avatar-template;attachTemplateToLocal:false;">
        </a-entity>
        <!-- /VIVE CONTROLLERS -->
        <a-entity id="lhand" mixin="touch " input-controls=" hand: left" networked="template:#left-hand-template"></a-entity>
        <a-entity id="rhand" mixin="touch " input-controls="hand: right" networked="template:#right-hand-template"></a-entity>
</a-entity>
      
      <!-- ground collider keeps objets from falling -->
      <a-box static-body width="100" height="0.01" depth="100" visible="false"></a-box>

  </a-scene>
  <script>
    // Define custom schema for syncing avatar color, set by random-color
    NAF.schemas.add({
      template: '#student-avatar-template',
      components: [
        'position',
        'rotation'
      ]
    });
    NAF.schemas.add({
      template: '#teacher-avatar-template',
      components: [
        'position',
        'rotation'
      ]
    });
    NAF.schemas.add({
      template: '#spectator-avatar-template',
      components: [
        'position',
        'rotation'
      ]
    });  
    NAF.schemas.add({
      template: '#constraint-spectator-avatar-template',
      components: [
        'position',
        'rotation',
        {
          selector: '.name-up',
          component: 'name-up'     
        },
      ]
    });  
    NAF.schemas.add({
      template: '#constraint-teacher-avatar-template',
      components: [
        'position',
        'rotation'
      ]
    });
    NAF.schemas.add({
      template: '#constraint-student-avatar-template',
      components: [
        'position',
        'rotation'
      ]
    });
    NAF.schemas.add({
      template: '#player-template',
      components: [
        'position',
        'rotation',
      ]
    });
    NAF.schemas.add({
      template: '#right-hand-template',
      components: [
        'position',
        'rotation'
      ]
    });
    NAF.schemas.add({
      template: '#left-hand-template',
      components: [
        'position',
        'rotation'
      ]
    });
    NAF.schemas.add({
      template: '#vxr-obj-template',
      components: [
        'position',
        'rotation',
        {
          selector: '.vxr-obj-maskn95',
          component: 'rotation'
        },
        {
          selector: '.vxr-obj-maskn95',
          component: 'position'
        },
        {
          selector: '.vxr-obj-alcoholbottle',
          component: 'rotation'
        },
        {
          selector: '.vxr-obj-alcoholbottle',
          component: 'position'
        },
        {
          selector: '.vxr-obj-tray',
          component: 'rotation'
        },
        {
          selector: '.vxr-obj-tray',
          component: 'position'
        },
        {
          selector: '.vxr-obj-b',
          component: 'material',
          property: 'color'
        }
      ]
    });
    NAF.schemas.add({
      template: '#vxr-template',
      components: [
        'position',
        'rotation',
        {
          selector: '.vxr-obj-a',
          component: 'rotation'
        },
        {
          selector: '.vxr-obj-a',
          component: 'position'
        },
        {
          selector: '.vxr-obj-b',
          component: 'rotation'
        },
        {
          selector: '.vxr-obj-b',
          component: 'position'
        },
        {
          selector: '.vxr-obj-c',
          component: 'rotation'
        },
        {
          selector: '.vxr-obj-c',
          component: 'position'
        },
        {
          selector: '.vxr-obj-b',
          component: 'material',
          property: 'color'
        }
      ]
    });
    //Called by Networked-Aframe when connected to server
    function onConnect() {
      console.log("funca");
    }
  </script>



</body>

</html>