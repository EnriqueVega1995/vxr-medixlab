<html>
  <head>
    <meta charset="utf-8">
    <title>Dev Example — Networked-Aframe</title>
    <meta name="description" content="Dev Example — Networked-Aframe">

    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.slim.js"></script>
    <script src="/easyrtc/easyrtc.js"></script>
    <script src="/dist/networked-aframe.js"></script>

    <script src="https://unpkg.com/aframe-randomizer-components@^3.0.1/dist/aframe-randomizer-components.min.js"></script>
    <script src="https://unpkg.com/aframe-particle-system-component@1.0.5/dist/aframe-particle-system-component.min.js"></script>
    <script src="/js/spawn-in-circle.component.js"></script>
  </head>
  <body>
    <a-scene networked-scene="
      room: dev;
      debug: true;
      adapter: wseasyrtc;
    ">




    <a-assets>
       
        <a.asser-item id="alcoholbottle" src="/Models/gltf/AlcoholBottle.gltf"></a.asser-item>
        <a.asser-item id="alcoholgel" src="/Models/gltf/AlcoholGel.gltf"></a.asser-item>
        <a-asset-item id="table01" src="/Models/gltf/Table.gltf"></a-asset-item>
        <a.asser-item id="tray" src="/Models/gltf/Tray.gltf"></a.asser-item>
        <a-asset-item id="base" src="/Models/gltf/Base.gltf"></a-asset-item>
        <a.asser-item id="cabinet01" src="/Models/gltf/Cabinet01.gltf"></a.asser-item>
        <a.asser-item id="cabinet02" src="/Models/gltf/Cabinet02.gltf"></a.asser-item>
        <a.asser-item id="cabinet03" src="/Models/gltf/Cabinet03.gltf"></a.asser-item>
        <a-asset-item id="bed" src="/Models/gltf/Bed.gltf"></a-asset-item>
        <a-asset-item id="container" src="/Models/gltf/TrashContainer.gltf"></a-asset-item>
        <a-asset-item id="containerblack" src="/Models/gltf/TrashContainerBlack.gltf"></a-asset-item>
        <a.asser-item id="cottonswabs01" src="/Models/gltf/CottonSwabs01.gltf"></a.asser-item>
        <a.asser-item id="cottonswabs02" src="/Models/gltf/CottonSwabs02.gltf"></a.asser-item>
        <a.asser-item id="cottonswabs03" src="/Models/gltf/CottonSwabs03.gltf"></a.asser-item>
        <a.asser-item id="door" src="/Models/gltf/Door.gltf"></a.asser-item>
        <a.asser-item id="dryer" src="/Models/gltf/Dryer.gltf"></a.asser-item>
        <a-asset-item id="floor" src="/Models/gltf/Floor.gltf"></a-asset-item>
        <a.asser-item id="forceps" src="/Models/gltf/Forceps.gltf"></a.asser-item>
        <a.asser-item id="gauze" src="/Models/gltf/Gauze.gltf"></a.asser-item>
        <a-asset-item id="maskn95" src="/Models/gltf/MaskN95.gltf"></a-asset-item>
        <a-asset-item id="medicaltape" src="/Models/gltf/MedicalTape.gltf"></a-asset-item>
        <a-asset-item id="table04" src="/Models/gltf/Table01.gltf"></a-asset-item>
        <a-asset-item id="modularscreen" src="/Models/gltf/ModularScreen.gltf"></a-asset-item>
        <a.asser-item id="nurse" src="/Models/gltf/NurseAvatar.gltf"></a.asser-item>
        <a.asser-item id="pressure" src="/Models/gltf/Pressure.gltf"></a.asser-item>
        <a-asset-item id="roof" src="/Models/gltf/Roof.gltf"></a-asset-item>
        <a.asser-item id="salver" src="/Models/gltf/Salver.gltf"></a.asser-item>
        <a-asset-item id="silla" src="/Models/gltf/Silla.gltf"></a-asset-item>
        <a.asser-item id="dripbag" src="/Models/gltf/DripBag.gltf"></a.asser-item>
        <a.asser-item id="surgicalpallets" src="/Models/gltf/SurgicalPallets.gltf"></a.asser-item>
        <a.asser-item id="table02" src="/Models/gltf/Table02.gltf"></a.asser-item>
        <a.asser-item id="table03" src="/Models/gltf/Table03.gltf"></a.asser-item>
        <a.asser-item id="patient" src="/Models/gltf/Patient.gltf"></a.asser-item>
        <a.asser-item id="tweezers" src="/Models/gltf/Tweezers.gltf"></a.asser-item>
        <a.asser-item id="tweezers2" src="/Models/gltf/Tweezers2.gltf"></a.asser-item>

      <!-- Hospital assets, static objects -->
        <a-asset-item id="bed" src="/Models/gltf/Bed.gltf"></a-asset-item>


      <!-- Construction assets, static objects -->
        <a-asset-item id="wall" src="/Models/gltf/Wall.gltf"></a-asset-item>
        <a-asset-item id="walldoor" src="/Models/gltf/WallDoor.gltf"></a-asset-item>
        <a-asset-item id="wallfront" src="/Models/gltf/WallFront.gltf"></a-asset-item>
        <a-asset-item id="wallwindow" src="/Models/gltf/WallWindow.gltf"></a-asset-item>
        <a.asser-item id="washer" src="/Models/gltf/Washer.gltf"></a.asser-item>
        <a.asser-item id="window" src="/Models/gltf/Window.gltf"></a.asser-item>
        
        <!--Asset section  -->
    </a-assets>
      <a-entity light="type: point; intensity: 0.75; distance: 50; decay: 2"
            position="0 10 10">
      </a-entity>
      <a-light type="directional" position="0 0 0" rotation="-90 0 0" target="#directionaltarget">
        <a-entity id="directionaltarget" position="0 0 -1"></a-entity>
      </a-light>

      <a-entity id="alcoholbottle01" gltf-model="#alcoholbottle"; scale="1 1 1" position="0.034 0.96339 -2.47318" material="color: brown" rotation="0 120 0"></a-entity>
      <a-entity id="alcoholgel01" gltf-model="#alcoholgel"; scale="1 1 1" position="-0.16398 0.91102 -2.48926" material="color: brown" rotation="0 1.2776958831417358 0"></a-entity>
      <a-entity id="tray002" gltf-model="#tray"; scale="1 1 1" position="-0.38318 0.9646 -2.208" material="color: brown" rotation="0 90 0"></a-entity>
      <a-entity id="tray003" gltf-model="#tray"; scale="1 1 1" position="0.28385 0.9726 -2.19651" material="color: brown" rotation="0 90 0"></a-entity>
      <a-entity id="cottonswabs001" gltf-model="#cottonswabs01"; scale="1 1 1" position="0.41426 0.98386 -2.04421" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="cottonswabs002" gltf-model="#cottonswabs02"; scale="1 1 1" position="0.41152 0.9828 -2.1072" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="cottonswabs003" gltf-model="#cottonswabs03"; scale="1 1 1" position="0.37626 0.98918 -2.06887" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="door01" gltf-model="#door"; scale="1 1 1" position="1.42119 -0.0061 5.61094" material="color: brown" rotation="0 0 0"></a-entity>
      
      <a-entity id="forceps01" gltf-model="#forceps"; scale="1 1 1" position="0.03371 0.97629 -2.19524" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="gauze01" gltf-model="#gauze"; scale="1 1 1" position="0.38385 0.97629 -2.19242" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="maskn9501" gltf-model="#maskn95"; scale="1 1 1" position="-0.37383 1.10281 -2.06184" material="color: brown" rotation="0 90 0"></a-entity>
      <a-entity id="medicaltape01" gltf-model="#medicaltape"; scale="1 1 1" position="0.38196 0.97084 -2.36309" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="table004" gltf-model="#table04"; scale="1 1 1" position="-0.50565 0.05425 5.01956" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="modularscreen01" gltf-model="#modularscreen"; scale="1 1 1" position="-2.55443 0.05425 -3.1504" material="color: brown" rotation="0 90 0"></a-entity>
      <a-entity id="modularscreen02" gltf-model="#modularscreen"; scale="1 1 1" position="-2.55443 0.05425 -2.21269" material="color: brown" rotation="0 90 0"></a-entity>
      <a-entity id="modularscreen03" gltf-model="#modularscreen"; scale="1 1 1" position="-2.55443 0.05425 -4.07504" material="color: brown" rotation="0 90 0"></a-entity>
      <a-entity id="nurseavatar01" gltf-model="#nurse"; scale="1 1 1" position="-0.18289 -0.01184 -1.96887" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="pressure01" gltf-model="#pressure"; scale="1 1 1" position="-0.0777 0.96688 -2.93335" material="color: brown" rotation="0 0 0"></a-entity>
     
      <a-entity id="salver01" gltf-model="#salver"; scale="1 1 1" position="2.68548 0.9076 1.67567" material="color: brown" rotation="0 90 0"></a-entity>
      <a-entity id="silla01" gltf-model="#silla"; scale="1 1 1" position="1.25118 0.07007 1.00642" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="silla02" gltf-model="#silla"; scale="1 1 1" position="0.27081 0.07224 1.01958" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="dripbag01" gltf-model="#dripbag"; scale="1 1 1" position="0.24321 0.97218 -2.09724" material="color: brown" rotation="0 90 0"></a-entity>
      <a-entity id="surgicalpallets01" gltf-model="#surgicalpallets"; scale="1 1 1" position="-3.29243 0.05275 5.16257" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="table002" gltf-model="#table02"; scale="1 1 1" position="-2.02767 0.05023 5.10127" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="table003" gltf-model="#table03"; scale="1 1 1" position="2.68763 0.07359 1.63293" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="cabinet005" gltf-model="#table03"; scale="1 1 1" position="-3.92189 0.07752 4.83356" material="color: brown" rotation="0 -90 0"></a-entity>
      <a-entity id="patient01" gltf-model="#patient"; scale="1 1 1" position="1.35487 0.09989 -1.32001" material="color: brown" rotatation="0 0 45"></a-entity>
      <a-entity id="tweezers01" gltf-model="#tweezers"; scale="1 1 1" position="-0.2605 0.97312 -2.33245" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="tweezers02" gltf-model="#tweezers2"; scale="1 1 1" position="-0.32312 0.97827 -2.34073" material="color: brown" rotation="0 0 0"></a-entity>
 
      <!-- Construction assets, static objects -->
      <a-entity id="dryer01" gltf-model="#dryer"; scale="1 1 1" position="2.9274 1.42006 0.81982" material="color: brown" rotation="0 90 0"></a-entity>
      <a-entity id="floor01" gltf-model="#floor"; scale="1 1 1" position="-0.013 0 3.248" material="color: #ffffff; emissive: #000000; emissiveIntensity: 1" rotation="0 0 0"></a-entity>
      <a-entity id="floor02" gltf-model="#floor"; scale="1 1 1" position="-5.98617 0 -1.752" material="color: #ffffff; emissive: #000000; emissiveIntensity: 1" rotation="0 0 0"></a-entity>
      <a-entity id="floor03" gltf-model="#floor"; scale="1 1 1" position="-5.986 0 3.248" material="color: #ffffff; emissive: #000000; emissiveIntensity: 1" rotation="0 0 0"></a-entity>
      <a-entity id="floor04" gltf-model="#floor"; scale="1 1 1" position="-0.01291 0 -1.752" material="color: #ffffff; emissive: #000000; emissiveIntensity: 1" rotation="0 0 0"></a-entity>
      <a-entity id="roof01" gltf-model="#roof"; scale="1 1 1" position="0.071 3.53958 -1.24954" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="roof02" gltf-model="#roof"; scale="1 1 1" position="0.07094 3.53958 4.89019" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="roof03" gltf-model="#roof"; scale="1 1 1" position="-6.07136 3.53958 -1.25" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="roof04" gltf-model="#roof"; scale="1 1 1" position="-6.071 3.53958 4.89" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="wallleft" gltf-model="#wall"; scale="1 1 1" position="-9.24196 0 2.72759" material="color: brown" rotation="0 180 0"></a-entity>
      <a-entity id="wallleft02" gltf-model="#wall"; scale="1 1 1" position="3.296 0 -1.58956" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="wallright"  gltf-model="#wall"; scale="1 1 1" position="-9.26816 0 -1.57869" material="color: #a52a2a" rotation="0 180 0"></a-entity>
      <a-entity id="wallright02"  gltf-model="#wall"; scale="1 1 1" position="3.296 0 2.728" material="color: #a52a2a" rotation="0 0 0"></a-entity>
      <a-entity id="wallfront" gltf-model="#walldoor"; scale="1 1 1" position="0.73228 0 5.6" material="color: #a52a2a" rotation="0 0 0"></a-entity>
      <a-entity id="wallfront02" gltf-model="#wallfront"; scale="1 1 1" position="-5.26453 0 5.6" material="color: #a52a2a" rotation="0 0 0"></a-entity>
      <a-entity id="wallback"  gltf-model="#wallwindow"; scale="1 1 1" position="-5.99395 0 -4.53513" rotation="0 0 0"></a-entity>
      <a-entity id="wallback02"  gltf-model="#wallwindow"; scale="1 1 1" position="-0.00198 0 -4.53513" rotation="0 0 0"></a-entity>
      <a-entity id="washer01" gltf-model="#washer"; scale="1 1 1" position="2.59554 0.04112 0.77797" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="window01" gltf-model="#window"; scale="1 1 1" position="-5.98243 0.65699 -4.57455" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="window02" gltf-model="#window"; scale="1 1 1" position="-0.01636 0.65699 -4.57455" material="color: brown" rotation="0 0 0"></a-entity>
     
      <!-- Hospital assets, static objects -->
      <a-entity id="table001" gltf-model="#table01"; scale="1 1 1" position="-0.02004 0.05136 -2.30545" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="base01" gltf-model="#base"; scale="1 1 1" position="0.88522 0.05089 -2.6065" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="cabinet001" gltf-model="#cabinet01"; scale="1 1 1" position="-0.47781 1.67577 5.38558" material="color: brown; metalness: 0" rotation="0 0 0"></a-entity>
      <a-entity id="cabinet002" gltf-model="#cabinet02"; scale="1 1 1" position="-2.03603 1.68609 5.37983" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="cabinet003" gltf-model="#cabinet03"; scale="1 1 1" position="-8.87798 1.33331 -0.58518" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="cabinet004" gltf-model="#cabinet03"; scale="1 1 1" position="-8.8795 1.33379 0.49905" material="color: brown" rotation="0 0 0"></a-entity>
      <a-entity id="bed01" gltf-model="#bed"; scale="1 1 1" position="1.32768 0.1254 -1.3118" material="color: brown; depthWrite: false; depthTest: false; alphaTest: 0; flatShading: false; side: front; metalness: 1" rotation="0 -2.97 0"></a-entity>
      <a-entity id="bed02" gltf-model="#bed"; scale="1 1 1" position="-3.65525 0.1254 -1.3183" material="color: brown; depthWrite: false; depthTest: false; alphaTest: 0; flatShading: false; side: front" rotation="0 -2.97 0"></a-entity>
      <a-entity id="container01" gltf-model="#container"; scale="1 1 1" position="-1.73 0.1254 -2.84888" material="color: brown" rotation="0 90 0"></a-entity>
      <a-entity id="containerblack01" gltf-model="#containerblack"; scale="1 1 1" position="-1.15316 0.12195 -2.86984" material="color: brown" rotation="0 90 0"></a-entity>


      <a-entity background="color: #92f2ff"></a-entity>

      <a-entity light="intensity: 0.5; type: ambient;"></a-entity>
    
    </a-scene>
    
    <script>
      // Define custom schema for syncing avatar color, set by random-color
      NAF.schemas.add({
        template: '#avatar-template',
        components: [
          'position',
          'rotation',
          {
            selector: '.head',
            component: 'material',
            property: 'color'
          }
        ]
      });

      // Called by Networked-Aframe when connected to server
      function onConnect () {
        console.log("onConnect", new Date());
      }

      // On mobile remove elements that are resource heavy
      var isMobile = AFRAME.utils.device.isMobile();

      if (isMobile) {
        var particles = document.getElementById('particles');
        particles.parentNode.removeChild(particles);
      }
    </script>
  </body>
</html>
